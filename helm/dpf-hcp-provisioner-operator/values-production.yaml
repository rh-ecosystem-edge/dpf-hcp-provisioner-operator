# Production deployment values for DPF-HCP Provisioner Operator
# Use this file for production environments with higher resource requirements
# and multiple BlueField image mappings

# Operator image configuration
image:
  repository: quay.io/lhadad/dpf-hcp-provisioner-operator
  tag: v0.1.0
  pullPolicy: IfNotPresent

# High availability - 2 replicas with leader election
replicaCount: 2

# Production namespace
namespace: dpf-hcp-provisioner-system

# Service account
serviceAccount:
  name: dpf-hcp-provisioner-operator-controller-manager
  annotations: {}

# Production resource limits
resources:
  limits:
    cpu: 1000m
    memory: 1Gi
  requests:
    cpu: 200m
    memory: 256Mi

# Info level logging for production
logLevel: info

# Feature flags for operator functionality
features:
  # BlueField image validation feature
  blueFieldValidation:
    # Disabled by default until we implement an alternative way to manage the OCP-to-BlueField list instead of using the ConfigMap
    # Set to true when BlueField images are available in Quay
    enabled: false

# Leader election enabled for HA
leaderElection:
  enabled: true

# Health probe configuration
healthProbe:
  port: 8081
  livenessProbe:
    initialDelaySeconds: 15
    periodSeconds: 20
  readinessProbe:
    initialDelaySeconds: 5
    periodSeconds: 10

# Security contexts
podSecurityContext:
  runAsNonRoot: true
  seccompProfile:
    type: RuntimeDefault

securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - "ALL"

# Run operator on master nodes
nodeSelector:
  node-role.kubernetes.io/master: ""

# Tolerate master node taints
tolerations:
  - key: "node-role.kubernetes.io/master"
    operator: "Exists"
    effect: "NoSchedule"

# Spread across zones for HA
affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchExpressions:
              - key: control-plane
                operator: In
                values:
                  - controller-manager
          topologyKey: topology.kubernetes.io/zone

# Pod annotations
podAnnotations:
  kubectl.kubernetes.io/default-container: manager

# Production BlueField image mappings
# IMPORTANT: Add your actual BlueField container image URLs here
blueFieldImages: {}
  # Example format (uncomment and replace with real URLs):
  # "4.19.0-ec.5": "quay.io/your-org/bluefield-rhcos:4.19.0-ec.5"
  # "4.18.0": "quay.io/your-org/bluefield-rhcos:4.18.0"
  # "4.17.0": "quay.io/your-org/bluefield-rhcos:4.17.0"

# Namespace labels
namespaceLabels:
  control-plane: controller-manager
  app.kubernetes.io/name: dpf-hcp-provisioner-operator
  app.kubernetes.io/managed-by: Helm
  environment: production

# Common labels for all resources
commonLabels:
  environment: production
  team: edge-infrastructure

# Common annotations
commonAnnotations:
  managed-by: "Red Hat Edge Infrastructure Team"
