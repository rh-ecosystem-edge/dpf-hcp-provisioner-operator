# Basic DPFHCPBridge Custom Resource Example
# This example creates a basic DPU cluster with minimal configuration
# Uses SingleReplica control plane with NodePort service exposure (no VirtualIP)

apiVersion: provisioning.dpu.hcp.io/v1alpha1
kind: DPFHCPBridge
metadata:
  name: basic-dpu-cluster
  namespace: default
spec:
  # Base domain for the hosted cluster's DNS records
  # API endpoint will be: api.<cluster-name>.<baseDomain>
  baseDomain: clusters.example.com

  # Reference to existing DPUCluster CR
  dpuClusterRef:
    name: my-dpucluster
    namespace: dpu-clusters

  # Storage class for etcd persistent volumes
  # Must be available in the management cluster
  etcdStorageClass: ocs-storagecluster-ceph-rbd

  # OCP release image pull-spec
  # The operator will look up the corresponding BlueField image
  ocpReleaseImage: quay.io/openshift-release-dev/ocp-release:4.19.0-ec.5-x86_64

  # Pull secret reference (must exist in same namespace as this CR)
  # Secret must contain key 'pullsecret' with container registry credentials
  pullSecretRef:
    name: my-pull-secret

  # SSH public key reference (must exist in same namespace as this CR)
  # Secret must contain key 'ssh-publickey' with SSH public key
  sshKeySecretRef:
    name: my-ssh-key

  # Control plane availability
  # SingleReplica = 1 replica (dev/test) - will use NodePort without VirtualIP
  # HighlyAvailable = 3 replicas (prod) - requires VirtualIP
  controlPlaneAvailabilityPolicy: SingleReplica
